<!DOCTYPE html>

<html>
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>WhereIsMyHome</title>
      <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
        crossorigin="anonymous"
      />
      <script
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"
      ></script>

      <!-- JavaScript -->
      <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>

      <!-- CSS -->
      <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
      <!-- Default theme -->
      <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css" />
      <!-- Semantic UI theme -->
      <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css" />
      <!-- Bootstrap theme -->
      <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css" />
    </head>
    <body>
      <!-- 상단 navbar start -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light shadow">
      <div class="container">
        <a class="navbar-brand text-primary fw-bold" href="./index.html">
          <img src="./img/ssafy_logo.png" alt="" width="60" /> WhereIsMyHome
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/jsp/notice.jsp"
                >공지사항</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/aptList.jsp"
                >공공데이터검색</a
              >
            </li>
          </ul>

          <!-- 로그인 전 -->
          <ul class="navbar-nav mb-2 me-2 mb-lg-0">
            <li class="nav-item">
              <!-- 회원가입 버튼 -->
              <button
                id="REGISTER"
                type="button"
                class="btn"
                data-bs-toggle="modal"
                data-bs-target="#userRegisterModal"
              >
                회원가입
              </button>
              <!-- 회원가입 Modal -->
              <div
                class="modal fade"
                id="userRegisterModal"
                tabindex="-1"
                aria-labelledby="registerModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="registerModalLabel">회원가입</h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      <div class="mb-3">
                        <label class="form-label">이름</label>
                        <input
                          type="text"
                          class="form-control"
                          id="userName"
                          placeholder="이름을 입력하세요"
                        />
                      </div>
                      <div class="mb-3">
                        <label class="form-label">비밀번호</label>
                        <input
                          type="password"
                          class="form-control"
                          id="userPassword"
                          placeholder="비밀번호를 입력하세요"
                        />
                      </div>
                      <div class="mb-3">
                        <label class="form-label">비밀번호 확인</label>
                        <input
                          type="password"
                          class="form-control"
                          id="userPassword2"
                          placeholder="비밀번호를 다시 입력하세요"
                        />
                      </div>
                      <div class="mb-3">
                        <label class="form-label">이메일</label>
                        <input
                          type="text"
                          class="form-control"
                          id="userEmail"
                          placeholder="이메일을 입력하세요"
                        />
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-primary" id="btnRegister">
                        회원가입
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li class="nav-item">
              <!-- 로그인 버튼 -->
              <button
                id="LOGIN"
                type="button"
                class="btn"
                data-bs-toggle="modal"
                data-bs-target="#userLoginModal"
              >
                로그인
              </button>
              <!-- 로그인 Modal -->
              <div
                class="modal fade"
                id="userLoginModal"
                tabindex="-1"
                aria-labelledby="loginModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="loginModalLabel">로그인</h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      <div class="mb-3">
                        <label for="formGroupExampleInput" class="form-label">이메일</label>
                        <input
                          type="text"
                          class="form-control"
                          id="userLoginEmail"
                          placeholder="이메일을 입력하세요"
                          value="admin@ssafy.com"
                        />
                      </div>
                      <div class="mb-3">
                        <label for="formGroupExampleInput2" class="form-label">비밀번호</label>
                        <input
                          type="password"
                          class="form-control"
                          id="userLoginPassword"
                          placeholder="비밀번호를 입력하세요"
                          value="admin"
                        />
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-primary" id="btnLogin">로그인</button>
                    </div>
                  </div>
                </div>
              </div>
            </li>
          </ul>

          <!-- 로그인 후 -->
          <ul class="navbar-nav mb-2 me-2 mb-lg-0">
            <!-- 로그아웃 버튼 -->
            <li class="nav-item">
              <button type="button" class="btn" id="LOGOUT">로그아웃</button>
            </li>

            <!-- 마이페이지 버튼 -->
            <li class="nav-item">
              <button
                id="MYPAGE"
                type="button"
                class="btn"
                data-bs-toggle="modal"
                data-bs-target="#userUpdateModal"
              >
                마이페이지
              </button>
              <div
                class="modal fade"
                id="userUpdateModal"
                tabindex="-1"
                aria-labelledby="updateModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="updateModalLabel">마이페이지</h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      <div class="mb-3">
                        <label for="formGroupExampleInput" class="form-label">이름</label>
                        <input type="text" class="form-control" id="userUpdateName" readonly />
                      </div>

                      <div class="mb-3">
                        <label for="formGroupExampleInput2" class="form-label">이메일</label>
                        <input type="text" class="form-control" id="userUpdateEmail" readonly />
                      </div>

                      <div class="mb-3">
                        <label for="formGroupExampleInput3" class="form-label">비밀번호</label>
                        <input
                          type="password"
                          class="form-control"
                          id="userUpdatePassword"
                          placeholder="비밀번호를 입력하세요"
                        />
                      </div>

                      <div class="mb-3">
                        <label for="formGroupExampleInput4" class="form-label">비밀번호 확인</label>
                        <input
                          type="password"
                          class="form-control"
                          id="userUpdatePassword2"
                          placeholder="비밀번호를 다시 입력하세요"
                        />
                      </div>

                      <div class="mb-3">
                        <label for="formGroupExampleInput5" class="form-label">가입 날짜</label>
                        <input type="text" class="form-control" id="userUpdateRegdt" readonly />
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-primary" id="btnUpdate">수정</button>
                      <button type="button" class="btn btn-danger" id="btnDelete">삭제</button>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li class="nav-item">
              <button type="button" class="btn" id="EVMANAGE">이벤트관리</button>
            </li>
          </ul>
        </div>
      </div>
    </nav>
      <!-- 상단 navbar end -->

      <div class="container">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">이벤트명</th>
              <th scope="col">시작일자</th>
              <th scope="col">종료일자</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody id="eventListBody"></tbody>
        </table>
        <button
          class="btn btn-primary btn-sm float-end"
          id="btnEventCreate"
          type="button"
          class="btn"
          data-bs-toggle="modal"
          data-bs-target="#btnEventCreateModal"
        >
          이벤트 등록
        </button>
        <!-- 이벤트등록 Modal -->
        <div
          class="modal fade"
          id="btnEventCreateModal"
          tabindex="-1"
          aria-labelledby="btnEventCreateModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="registerModalLabel">이벤트 등록</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="mb-3">
                  <label class="form-label">이벤트 명</label>
                  <input type="text" class="form-control" id="eventName" placeholder="이름을 입력하세요" />
                </div>
                <div class="mb-3">
                  <label class="form-label">시작일자</label> <input type="date" class="form-control" id="eventFrom" />
                </div>
                <div class="mb-3">
                  <label class="form-label">종료일자</label> <input type="date" class="form-control" id="eventTo" />
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnEventRegister">등록</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <script src="js/util.js"></script>

      <script>
      var loginUserEmail = "";
			
      window.onload = function () {
        
		/* let userDto= */
        // 로그인 / 회원가입 / 로그아웃 / 마이페이지 버튼
		
		if (sessionStorage.getItem("userEmail") != null) {
			loginUserEmail = sessionStorage.getItem("userEmail");
		}
		
		console.log(sessionStorage.getItem("userEmail"));
		console.log(typeof sessionStorage.getItem("userEmail"));
		console.log(loginUserEmail);
			
		if(loginUserEmail != ""){
			document.querySelector("#REGISTER").style.display = "none";
			document.querySelector("#LOGIN").style.display = "none";
			document.querySelector("#LOGOUT").style.display = "inline-block";
			document.querySelector("#MYPAGE").style.display = "inline-block";
			if(sessionStorage.getItem("userClsf") === "1"){
				document.querySelector("#EVMANAGE").style.display = "inline-block";
			} else {
				document.querySelector("#EVMANAGE").style.display = "none";
			}
		}else{
			document.querySelector("#REGISTER").style.display = "inline-block";
			document.querySelector("#LOGIN").style.display = "inline-block";
			document.querySelector("#LOGOUT").style.display = "none";
			document.querySelector("#MYPAGE").style.display = "none";
			document.querySelector("#EVMANAGE").style.display = "none";
		}
        //
        
        
        // 로그인 시작
        document.querySelector("#btnLogin").onclick = function(){
            let userEmailValue = document.querySelector("#userLoginEmail").value;
            let userPasswordValue = document.querySelector("#userLoginPassword").value;
            console.log(userEmailValue);
            console.log(userPasswordValue);


            // 유효성 검사 => POST 전송
            if(validate()){
                login();
            }else{
                // 유효성 검사 실패 코드
            }
        }
        // 로그인 끝
        
        // 로그아웃 confirm
        document.querySelector('#LOGOUT').onclick = function(){
			alertify.confirm("정보", "로그아웃 하시겠습니까?", function(){
				logout();
			}, function(){ console.log("로그아웃 취소"); });
	    }
	   	// 로그아웃 끝 
       
        
        // 회원가입 시작
//         document.querySelector("#REGISTER").onclick = function(){
// 	   		registerForm();
// 	   	}
        
        document.querySelector("#userName").focus();

        document.querySelector("#userName").onblur = function(){
            if(validateUserName(this.value)){
                this.classList.remove('is-invalid');
                this.classList.add('is-valid');
                
            }else{
                this.classList.remove('is-valid');
                this.classList.add('is-invalid');
                
            }
        }

        document.querySelector("#userPassword").onblur = function(){
            if(validatePassword(this.value)){
                this.classList.remove('is-invalid');
                this.classList.add('is-valid');

            }else{
                this.classList.remove('is-valid');
                this.classList.add('is-invalid');
            }
        }

        document.querySelector("#userPassword2").onblur = function(){
            if(validatePassword2(this.value)){
                this.classList.remove('is-invalid');
                this.classList.add('is-valid');

            }else{
                this.classList.remove('is-valid');
                this.classList.add('is-invalid');
            }
        }

        document.querySelector("#userEmail").onblur = function(){
            if(validateEmail(this.value)){
                this.classList.remove('is-invalid');
                this.classList.add('is-valid');

            }else{
                this.classList.remove('is-valid');
                this.classList.add('is-invalid');
            }
        }


        
        document.querySelector("#btnRegister").onclick = function(){
        	if(document.querySelectorAll("form .is-invalid").length == 0){
        		regist();
        	}
        	else alert("입력을 다시 확인해주세요");
        }
        
        // 회원가입 끝
        document.querySelector("#MYPAGE").onclick = function(){
        	userDetail();
        }
        
        /////////////////onload 변경점 끝///////////////////////////////////////
        
        // 회원정보 수정 시작
        document.querySelector("#btnUpdate").onclick = function(){
        	updateUser();
        }
        // 회원정보 수정 끝
        
     	// 회원정보 삭제 시작
        document.querySelector("#btnDelete").onclick = function(){
        	deleteUser();
        }
        // 회원정보 삭제 끝
        
        getEventList();
        
      };
      
      // 이벤트 삭제 시작
      async function deleteEvent(id) {
        // userEmail = document.querySelector("#userUpdateEmail").value;
        if (confirm("삭제된 이벤트는 되돌릴 수 없습니다. 정말 삭제하시겠습니까?")) {

          let fetchOptions = {
            method: "DELETE",
          };

          let response = await fetch("/events/" + id, fetchOptions);
          let data = await response.json(); // json => js object <= JSON.parse();
          if (data.result == 1) {
            // login.jsp => /jsp/login.jsp 로 페이지 이동 ( 새로운 페이지 요청 )
            alertify.alert("Welcome!", "이벤트 삭제가 완료되었습니다.", function () {
              alertify.message("이벤트 삭제");
              window.location.reload();
            });
          } else if (data.result == -1) {
            alert("삭제에 실패했습니다.");
          }
        }
      }
      // 이벤트 삭제 끝

      document.querySelector("#btnEventRegister").onclick = function () {
        eventRegist();
      };

      // 이벤트 등록 시작
      async function eventRegist() {
        eventName = document.querySelector("#eventName").value;
        eventFrom = document.querySelector("#eventFrom").value;
        eventTo = document.querySelector("#eventTo").value;

        let urlParams = new URLSearchParams({
          eventName: eventName,
          eventFrom: eventFrom,
          eventTo: eventTo,
        });

        let fetchOptions = {
          method: "POST",
          body: urlParams,
        };

        let response = await fetch("/events", fetchOptions);
        let data = await response.json();
        if (data.result == 1) {
          alertify.alert("Welcome!", "이벤트 등록을 성공했습니다.", function () {
            window.location.reload();
          });
        } else if (data.result == -1) {
          alert("이벤트 등록 실패.");
        }
      }
      // 이벤트 등록 끝
      
      // 로그인 시작
      function validate(){
                    //return true / false
                    let isUserEmailValid = false;
                    let isUserPasswordValid = false;
    
                    let userEmailValue = document.querySelector("#userLoginEmail").value;
                    if(userEmailValue.length > 0){
                        isUserEmailValid = true;
                    }
    
                    let userPasswordValue = document.querySelector("#userLoginPassword").value;
                    if(userPasswordValue.length > 0){
                        isUserPasswordValid = true;
                    }
    
    
                    if(isUserEmailValid && isUserPasswordValid){
                        return true;
                    }
    
                    return false;
                }
    
                async function login(){
                    // validate() 가 true면 return 
                    // 백엔드로 전송할 데이터 준비
                    // 비동기요청 + POST
                    // success => /board/boardMain
                    // fail => alert
    
                    
                    let userEmail = document.querySelector("#userLoginEmail").value;
                    let userPassword = document.querySelector("#userLoginPassword").value;
    
                    // parameter
                    let urlParams = new URLSearchParams({
                        userEmail: userEmail,
                        userPassword: userPassword
                    });
    
                    // fetch options
                    let fetchOptions = {
                        method: "POST",
                        body: urlParams
                    }
    
                    
                    let response = await fetch("/login", fetchOptions);
                    let data = await response.json(); // json => js object <= JSON.parse();
                    if(data.result == "success"){
                    	sessionStorage.setItem("userEmail", data.userEmail);
                    	sessionStorage.setItem("userClsf", data.userClsf);
                    	window.location.reload();
                    }else if(data.result == "fail"){
                    	alertify.error('아이디 또는 패스워드를 확인하세요.');
                    }
                
                    // fetch(url, option)
                }
      		// 로그인 종료
      
      		// 회원가입 관련 시작
      		
      		// 실제 회원가입
      		async function regist(){
            	userName = document.querySelector("#userName").value;
                userPassword = document.querySelector("#userPassword").value;
                userEmail = document.querySelector("#userEmail").value;

                let urlParams = new URLSearchParams ({
                    userName: userName,
                    userPassword: userPassword,
                    userEmail: userEmail,
                });

                let fetchOptions = {
                method: "POST",
                body: urlParams
                }

                let response = await fetch("/users", fetchOptions);
                let data = await response.json(); // json => js object <= JSON.parse();
                if(data.result == "success"){ // login.jsp => /jsp/login.jsp 로 페이지 이동 ( 새로운 페이지 요청 )
                	alertify.alert("Welcome!", "회원가입을 축하드립니다.", function(){
                		  alertify.message('회원가입 성공');
                		 window.location.reload();
                	});
                	
                }else if(data.result == "fail"){
                    alert('아이디 또는 패스워드를 확인하세요.');
                }
            }

            function validateUserName(userName){
                if(userName.length >= 3) return true;
                return false;
            }

            function validatePassword(userPassword){
                var patternEngAtListOne = new RegExp(/[a-zA-Z]+/);// + for at least one
                var patternSpeAtListOne = new RegExp(/[~!@#$%^&*()_+|<>?:{}]+/);// + for at least one
                var patternNumAtListOne = new RegExp(/[0-9]+/);// + for at least one

                if( patternEngAtListOne.test( userPassword ) 
                        && patternSpeAtListOne.test( userPassword )  
                        && patternNumAtListOne.test( userPassword )
                        && userPassword.length >= 8
                ){
                    return true;
                }
                else return false;
            }

            function validatePassword2(userPassword2) {
                if (userPassword2 == document.querySelector("#userPassword").value ) return true;
                else return false;
            }

            function validateEmail(userEmail){
                var emailPattern = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;

                if(userEmail.match(emailPattern) != null) return true;
                return false;
            }
            
            // 회원가입 종료
            
            // 로그아웃 시작
            
            async function logout(){
				// logout => 백엔드에서 sessin.invalidate();
				// result => success => login 페이지 이동
				
				
				let url = "/logout";
				let response = await fetch(url);
				let data = await response.json();
			    if(data.result == "success"){ 
			    	sessionStorage.setItem("userEmail", "");
                	sessionStorage.setItem("userClsf", "-1");
			    	window.location.reload();
			    }else if(data.result == "fail"){
			        alertify.error("로그아웃 과정에서 오류가 발생했습니다.");
			    }
			}
            
            // 로그아웃 종료
            
            // 이벤트 리스트
            async function getEventList(){
				
				let eventListBodyTag = document.getElementById("eventListBody");
				
				let url = "/events";
				let response = await fetch(url);
				let data = await response.json();
				var innerHTML = ``;
				console.log(data);
				console.log(data.eventList);
   				data.eventList.forEach(el =>{
   					
   					innerHTML += `<tr>
                    <th scope="row">${el.eventId}</th>
                    <td>${el.eventName}</td>
                    <td>${el.eventFrom}</td>
                    <td>${el.eventTo}</td>
                    <td>
                        <button class="btn btn-danger btn-sm" id="btnEventDelete" onclick="deleteEvent(${el.eventId})">삭제하기</button>
                    </td>
                </tr>`;
   				});
   				
   				eventListBodyTag.innerHTML = innerHTML;
				
			}
            // 이벤트 리스트 끝
            
            // 회원정보 변경 시작
            async function updateUser(){
            	userEmail = document.querySelector("#userUpdateEmail").value;
                userPassword = document.querySelector("#userUpdatePassword").value;
                userPassword2 = document.querySelector("#userUpdatePassword2").value;
				
                
                if (validatePassword(userPassword) && userPassword == userPassword2) {
	                let urlParams = new URLSearchParams ({
	                    userEmail: userEmail,
	                    userPassword: userPassword,
	                });
	
	                let fetchOptions = {
	                method: "PUT",
	                body: urlParams
	                }
	
	                let response = await fetch("/users/"+loginUserEmail, fetchOptions);
	                let data = await response.json(); // json => js object <= JSON.parse();
	                if(data.result == "success"){ // login.jsp => /jsp/login.jsp 로 페이지 이동 ( 새로운 페이지 요청 )
	                	alertify.alert("Welcome!", "회원정보가 변경되었습니다.", function(){
	                		  alertify.message('회원정보 변경');
	                		 window.location.reload();
	                	});
	                	
	                }else if(data.result == "fail"){
	                    alert('아이디 또는 패스워드를 확인하세요.');
	                }
                } else {
                	alert('비밀번호를 확인해주세요.');
                }
                
            }
            // 회원정보 변경 끝
            
            // 회원정보 삭제 시작
            async function deleteUser(){
            	userEmail = document.querySelector("#userUpdateEmail").value;
            	
                if (confirm("삭제된 아이디는 되돌릴 수 없습니다. 정말 탈퇴하시겠습니까?")) {
	                let urlParams = new URLSearchParams ({
	                    userEmail: userEmail,
	                });
	
	                let fetchOptions = {
	                method: "DELETE",
	                body: urlParams
	                }
	
	                let response = await fetch("/users/"+userEmail, fetchOptions);
	                let data = await response.json(); // json => js object <= JSON.parse();
	                if(data.result == "success"){ // login.jsp => /jsp/login.jsp 로 페이지 이동 ( 새로운 페이지 요청 )
	                	alertify.alert("Welcome!", "회원탈퇴가 완료되었습니다.", function(){
	                		 alertify.message('회원정보 삭제');
	                		 logout();
	                	});
	                	
	                }else if(data.result == "fail"){
	                    alert('아이디 또는 패스워드를 확인하세요.');
	                }
                }
            }
            // 회원정보 삭제 끝
            
            document.querySelector('#EVMANAGE').onclick = function(){
		   		location.href="/eventList.html";
	   		}
           	

            function validateUserName(userName){
                if(userName.length >= 3) return true;
                return false;
            }
            
            
            // 유저 정보 받기
            async function userDetail(){

       			let url = "/users/" + loginUserEmail;
       			console.log(url);
       			
       			try{
       				let response = await fetch(url);
       				let detail = await response.json();
       				
       				console.log(detail);
       				let userName = detail.userName;
       				let userEmail = detail.userEmail;
//        				let regDt = detail.userRegistDate;
//     				let regDtStr = makeDateStr(regDt.date.year, regDt.date.month, regDt.date.day, ".");
    				
    				console.log(userName);
    				
    				document.querySelector('#userUpdateName').value = userName;
    				document.querySelector('#userUpdateEmail').value = userEmail;
//     				document.querySelector('#userUpdateRegdt').value = regDtStr;
    				
       			}catch( error ){
       				
       				console.log(error);
       				alertify.error('글 상세조회 과정에서 문제가 생겼습니다.');
       			
       			}
            }
            
    </script>
      <footer class="navbar navbar-expand-lg navbar-light bg-light container justify-content-end fixed-bottom bottom-0">
        <div class="row">
          <ul class="navbar-nav">
            <li><a href="#" class="nav-link text-secondary">카페소개</a></li>
            <li><a href="#" class="nav-link text-secondary">개인정보처리방침</a></li>
            <li><a href="#" class="nav-link text-secondary">이용약관</a></li>
            <li><a href="#" class="nav-link text-secondary">오시는길</a></li>
            <li><label class="nav-link text-secondary">&copy; SSAFY Corp.</label></li>
          </ul>
        </div>
      </footer>
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"
      ></script>
      <script>
        
      </script>
    </body>
  </html>
</html>
